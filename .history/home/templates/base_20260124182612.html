{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>

  <!-- ✅ Basic Meta -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ✅ SEO -->
  <title>{% block title %}{{ settings_obj.meta_title }}{% endblock %}</title>
  <meta name="description" content="{{ settings_obj.meta_description }}">
  <meta name="keywords" content="{{ settings_obj.meta_keywords }}">

  <!-- ✅ Favicon -->
  <link rel="icon" href="{{ settings_obj.favicon.url }}" type="image/png">
  <link rel="apple-touch-icon" href="{{ settings_obj.favicon.url }}">

  <!-- ✅ Tailwind (ONLY ONCE) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ✅ Bootstrap CSS (ONLY ONE VERSION) -->
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
    rel="stylesheet">

  <!-- ✅ Swiper CSS (ONCE) -->
  <link 
    rel="stylesheet" 
    href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

  <!-- ✅ AOS CSS -->
  <link 
    rel="stylesheet" 
    href="https://unpkg.com/aos@2.3.4/dist/aos.css">

  <!-- ✅ Local CSS (LAST) -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}">

  <!-- ✅ Google reCAPTCHA (async safe) -->
  <script 
    src="https://www.google.com/recaptcha/api.js?render=6LdgIDUsAAAAABGkx3xhZfup6EXvsaZh5RQ5Q61"
    async defer>
  </script>

</head>

<body>

  {% include 'includes/header.html' %}

  <main>
    {% block content %}{% endblock %}
  </main>

  {% include 'includes/footer.html' %}

  <!-- ================= JS START ================= -->

  <!-- ✅ FAQ Script (inline – small & safe) -->
  <script defer>
    document.addEventListener("DOMContentLoaded", function () {
      const faqData = document.querySelectorAll("#faqData .faq-item");
      const faqContainer = document.getElementById("faqContainer");
      const loadMoreBtn = document.getElementById("loadMoreBtn");
      const showLessBtn = document.getElementById("showLessBtn");

      if (!faqContainer) return;

      let itemsToShow = 6;

      function renderFAQs() {
        faqContainer.innerHTML = "";
        faqData.forEach((item, index) => {
          if (index < itemsToShow) {
            faqContainer.appendChild(item.cloneNode(true));
          }
        });
        loadMoreBtn?.classList.toggle("hidden", itemsToShow >= faqData.length);
        showLessBtn?.classList.toggle("hidden", itemsToShow <= 6);
      }

      renderFAQs();

      loadMoreBtn?.addEventListener("click", () => {
        itemsToShow += 6;
        renderFAQs();
      });

      showLessBtn?.addEventListener("click", () => {
        itemsToShow = 6;
        renderFAQs();
        window.scrollTo({ top: faqContainer.offsetTop - 100, behavior: "smooth" });
      });
    });
  </script>

  <!-- ✅ Swiper JS -->
  <script 
    src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" 
    defer>
  </script>

  <!-- ✅ Bootstrap JS -->
  <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
    defer>
  </script>

  <!-- ✅ AOS JS -->
  <script 
    src="https://unpkg.com/aos@2.3.4/dist/aos.js" 
    defer>
  </script>

  <script defer>
    document.addEventListener("DOMContentLoaded", function () {
      AOS.init({
        duration: 800,
        once: true
      });
    });
  </script>

  <!-- ✅ Local JS -->
  <script src="{% static 'assets/home/content.js' %}" defer></script>

  <!-- ================= JS END ================= -->

</body>
</html>
