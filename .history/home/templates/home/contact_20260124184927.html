{% extends 'base.html' %}
{% load static %}
{% load utility_tags %}
{% load humanize %}

{% block title %}Contact Makaan Hub | Real Estate Experts{% endblock %}

{% block content %}

<!-- HERO -->
<section class="relative min-h-[45vh] flex items-center justify-center text-white overflow-hidden bg-orange-500">
  <div class="absolute inset-0 bg-[url('{% static 'images/bg-pattern.svg' %}')] opacity-10"></div>
  <div class="relative z-10 max-w-3xl mx-auto px-6 text-center">
    <h1 class="text-4xl md:text-5xl font-bold mb-4">Get in Touch</h1>
    <p class="text-lg md:text-xl opacity-90">Weâ€™d love to hear from you. Reach out for inquiries, collaborations, or support.</p>
  </div>
</section>

<!-- CONTACT -->
<section class="py-16 bg-gray-50">
  <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10 px-6">

    <!-- FORM -->
    <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">Send Us a Message</h2>

      {% if messages %}
        {% for message in messages %}
          <div class="mb-4 p-3 rounded-lg text-sm {% if message.tags == 'success' %}bg-green-100 text-green-800{% else %}bg-red-100 text-red-800{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

      <form action="{% url 'contact' %}" method="POST" class="space-y-5">
        {% csrf_token %}

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Full Name</label>
          <input name="name" type="text" placeholder="Your Name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Email Address</label>
          <input name="email" type="email" placeholder="Your Email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Phone Number</label>
          <input name="phone" type="tel" placeholder="Enter Mobile Number" required pattern="[6-9][0-9]{9}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Message</label>
          <textarea name="message" rows="4" placeholder="Type your message..." required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"></textarea>
        </div>

        <button type="submit" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-lg transition-transform transform hover:scale-[1.02] duration-200">
          Send Message
        </button>

        <!-- Quick CTA -->
        <div class="flex gap-3 pt-2">
          <a href="tel:{{ settings_obj.phone }}" class="flex-1 text-center py-3 rounded-lg border border-orange-500 text-orange-600 font-semibold hover:bg-orange-50">Call Now</a>
          <a href="https://wa.me/{{ settings_obj.phone|default_if_none:'' }}" target="_blank" class="flex-1 text-center py-3 rounded-lg bg-green-500 text-white font-semibold hover:bg-green-600">WhatsApp</a>
        </div>
      </form>
    </div>

    <!-- INFO -->
    <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100 flex flex-col justify-between">
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-6">
          {% if contact_content and contact_content.heading %}{{ contact_content.heading }}{% else %}Contact Information{% endif %}
        </h2>

        {% if contact_content %}
          <p class="text-gray-700 mb-3">ğŸ“ {{ contact_content.address }}</p>
          <p class="text-gray-700 mb-3">ğŸ“ {{ contact_content.phone }}</p>
          <p class="text-gray-700 mb-3">âœ‰ï¸ {{ contact_content.email }}</p>
        {% else %}
          <p class="text-gray-700 mb-3">ğŸ“ {{ settings_obj.address }}</p>
          <p class="text-gray-700 mb-3">ğŸ“ {{ settings_obj.phone }}</p>
          <p class="text-gray-700 mb-3">âœ‰ï¸ {{ settings_obj.email }}</p>
        {% endif %}
      </div>

      <!-- MAP (LAZY LOAD) -->
     <div class="mt-6 rounded-lg overflow-hidden shadow-md border border-gray-100">
  {% if contact_content and contact_content.map_iframe %}
    {{ contact_content.map_iframe|safe }}
  {% elif settings_obj and settings_obj.google_map %}
    {{ settings_obj.google_map|safe }}
  {% else %}
    <div class="p-6 text-center text-sm text-gray-500">Map not available.</div>
  {% endif %}
</div>

    </div>

  </div>
</section>

{% endblock %}
