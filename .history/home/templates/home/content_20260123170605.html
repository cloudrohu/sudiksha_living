{% load static %}
{% load humanize %}
{% load indian_price %}

<!-- SwiperJS -->
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script>
  var swiper = new Swiper(".mySwiper", {
    slidesPerView: 1,
    spaceBetween: 20,
    loop: true,
    pagination: { el: ".swiper-pagination", clickable: true },
    navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
    breakpoints: { 768: { slidesPerView: 2 }, 1024: { slidesPerView: 3 } }
  });
</script>
<link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>AOS.init({ duration: 1000, once: true });</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>


<!-- FEATURE PROJECTS -->
<section class="bg-[#f8fafc] py-16 relative overflow-hidden">
  <div class="max-w-7xl mx-auto px-4">

    <!-- Section Title -->
    <div class="text-center mb-10">
      <h2 class="text-3xl md:text-4xl font-bold text-orange-400 uppercase tracking-wide">
        Featured Projects
      </h2>
      <p class="text-gray-300 mt-1 text-sm md:text-base">
        Explore our best and most popular real estate projects
      </p>
    </div>

    <!-- Swiper Container -->
    <div class="relative">
      <div class="swiper mySwiper px-8"> <!-- Added padding so arrows stay outside cards -->
        <div class="swiper-wrapper">

          {% for rs in project_featured %}
          <div class="swiper-slide">
            <div class="bg-white shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200">

              <!-- Image Section -->
              <div class="relative h-60 w-full overflow-hidden">
                {% if rs.image %}
                  <img src="{{ rs.image.url }}" alt="{{ rs.project_name }}  "
                    class="w-full h-full object-cover transition-transform duration-500 hover:scale-200">
                {% else %}
                  <img src="{% static 'images/default-placeholder.jpg' %}" alt="No image"
                    class="w-full h-full object-cover">
                {% endif %}

                <!-- Property Type Tag -->
                <span class="absolute top-3 left-3 bg-orange-500 text-white text-[12px] font-semibold px-3 py-1 rounded-full shadow">
                  {{ rs.propert_type }}
                </span>

                <!-- Construction Status -->
                <span class="absolute bottom-3 right-3 bg-black/80 text-white text-[11px] font-medium px-3 py-1 rounded-full">
                  {{ rs.construction_status }}
                </span>

                <!-- Hover Icons -->
                <div class="absolute inset-0 bg-black/40 flex items-center justify-center gap-4 opacity-0 hover:opacity-100 transition duration-300">
                  <a href="{{ rs.get_absolute_url }}" class="bg-white p-3 rounded-full shadow hover:bg-orange-500 hover:text-white transition">
                    <i class="fas fa-link"></i>
                  </a>
                  <a href="{{ rs.get_absolute_url }}" class="bg-white p-3 rounded-full shadow hover:bg-orange-500 hover:text-white transition">
                    <i class="fas fa-video"></i>
                  </a>
                </div>
                
              </div>

              <!-- Content -->
              <div class="p-3 space-y-2">
               <div class="flex items-start justify-between gap-3">
                <h3 class="text-lg font-semibold text-gray-800 hover:text-orange-600 transition leading-snug flex-1">
                  {{ rs.project_name }}
                </h3>
                <div class="text-right shrink-0">
                  {% if rs.min_price and rs.max_price %}
                    <p class="text-[13px] font-bold text-orange-600 leading-tight">
                      ‚Çπ{{ rs.min_price|indian_price }} - ‚Çπ{{ rs.max_price|indian_price }}
                    </p>
                  {% elif rs.min_price %}
                    <p class="text-[13px] font-bold text-orange-600 leading-tight">
                      ‚Çπ{{ rs.min_price|indian_price }}+
                    </p>
                  {% else %}
                    <p class="text-[12px] text-gray-400 italic leading-tight">
                      Price on request
                    </p>
                  {% endif %}
                </div>
              </div>
              
              <p class="text-sm text-gray-600 flex items-center gap-1 leading-relaxed">
                <i class="fas fa-map-marker-alt text-orange-500"></i>
                {{ rs.locality }}
              </p>

                  <!-- ================= CONFIGURATION CARD ================= -->
                  <div class="config-card border bg-white mt-2 overflow-hidden">

                    {% with rs.configurations.all as configs %}
                    {% if configs %}
                    {% regroup configs by bhk_type as bhk_groups %}

                    <!-- ================= TABS ================= -->
                    <div class="relative overflow-x-auto border-b border-gray-200">
                      <div class="bhk-tabs flex gap-1 text-sm font-semibold whitespace-nowrap relative px-2 py-1">

                        <!-- Animated underline -->
                        <span class="bhk-underline absolute bottom-0 h-[3px]"></span>

                        {% for group in bhk_groups %}
                          <button type="button"
                            class="bhk-tab px-3 py-2 rounded-md transition-all duration-200
                            {% if forloop.first %}active{% endif %}"
                            data-target="bhk-{{ rs.id }}-{{ forloop.counter }}">
                            {{ group.grouper }}
                          </button>
                        {% endfor %}

                      </div>
                    </div>

                    <!-- ================= PANELS ================= -->
                    {% for group in bhk_groups %}
                    <div class="bhk-panel {% if not forloop.first %}hidden{% endif %}"
                        data-panel="bhk-{{ rs.id }}-{{ forloop.counter }}">

                      <!-- ‚úÖ ONLY 2 ROWS VISIBLE + SCROLL -->
                      <div class="table-scroll bg-white overflow-y-auto max-h-[95px]">

                        <table class="w-full text-xs sm:text-sm border-collapse">
                          <thead class="bg-gray-50 sticky top-0 z-10">
                            <tr class="text-center font-bold text-gray-700">
                              <th class="px-2 py-2 border-b">Area</th>
                              <th class="px-2 py-2 border-b">Price</th>
                              <th class="px-2 py-2 border-b">Parking</th>
                              <th class="px-2 py-2 border-b">Balcony</th>
                            </tr>
                          </thead>

                          <tbody class="text-center">
                            {% for cfg in group.list %}
                            <tr class="h-[32px] {% if cfg.sold_out %}bg-red-50{% endif %}">

                              <td class="px-2 py-2 border-b text-gray-800">
                                {{ cfg.area_sqft }} sqft
                              </td>

                              <td class="px-2 py-2 border-b font-semibold">
                                {% if cfg.sold_out %}
                                  <span class="inline-flex items-center px-2 py-0.5 bg-red-100 text-red-700 text-[11px] font-bold">
                                    SOLD OUT
                                  </span>
                                {% else %}
                                  <span class="font-extrabold text-orange-600">
                                    {{ cfg.formatted_price }}
                                  </span>
                                {% endif %}
                              </td>

                              <td class="px-2 py-2 border-b">
                                {% if cfg.parking %}
                                  <span class="text-green-600 font-bold">Yes</span>
                                {% else %}
                                  <span class="text-gray-500">*</span>
                                {% endif %}
                              </td>

                              <td class="px-2 py-2 border-b">
                                {% if cfg.balcony %}
                                  <span class="text-green-600 font-bold">Yes</span>
                                {% else %}
                                  <span class="text-gray-500">*</span>
                                {% endif %}
                              </td>

                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>

                      </div>
                    </div>
                    {% endfor %}

                    {% else %}
                    <!-- ================= NO CONFIG ================= -->
                    <div class="text-center text-sm text-gray-500 py-3">
                      Configuration details available on request
                    </div>
                    {% endif %}
                    {% endwith %}

                  </div>
              
              </div>

              <!-- Footer Button -->
              <div class="bg-orange-500 text-center py-2 hover:bg-orange-600 transition">
                <a href="{{ rs.get_absolute_url }}" class="text-white font-semibold uppercase tracking-wide text-[14px]">
                  See Details
                </a>
              </div>
            </div>
          </div>

          {% empty %}
          <p class="col-span-3 text-center text-gray-500">No featured projects available at the moment.</p>
          {% endfor %}
        </div>
      </div>
      <br>
      <!-- Swiper Pagination & Arrows -->
      <div class="swiper-pagination mt-6"></div>
      <div class="swiper-button-prev !text-orange-500 !left-0 -translate-x-8 scale-90"></div>
      <div class="swiper-button-next !text-orange-500 !right-0 translate-x-8 scale-90"></div>
    </div>

  </div>
</section>

<script>
  var swiper = new Swiper(".mySwiper", {
    slidesPerView: 1,
    spaceBetween: 20,
    loop: true,
    autoplay: {
      delay: 3000, // Auto slide every 3 seconds
      disableOnInteraction: false,
      pauseOnMouseEnter: true, // pause on hover
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    breakpoints: {
      640: { slidesPerView: 1.2 },
      768: { slidesPerView: 2 },
      1024: { slidesPerView: 3 },
    },
  });
</script>

<!-- FEATURE PROJECTS -->

   


<!-- NEW LAUCH PROJECTS -->
<section class="py-12" data-aos="fade-up">
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    
    <!-- Title -->
    <h2 class="text-2xl sm:text-3xl font-extrabold text-center mb-8 text-orange-600 uppercase">
      NEW LAUNCH PROJECTS
    </h2>

    <!-- Tabs -->
    <div class="flex flex-wrap justify-center mb-8 gap-3">
      <button data-tab="residential" class="tab-btn active px-6 py-2 font-semibold shadow transition">
        Residential
      </button>
      <button data-tab="commercial" class="tab-btn bg-gray-200 text-gray-800 px-6 py-2 font-semibold hover:bg-orange-200 transition">
        Commercial
      </button>
    </div>

          <!-- residential TAB -->
      <div id="residential" class="tab-content">
        <div class="swiper mySwiper">
          <div class="swiper-wrapper">

            {% for project in new_launch_residential %}
            <div class="swiper-slide bg-white shadow-lg  overflow-hidden border-t-4 border-orange-500 hover:shadow-xl transition">

              <div class="relative">
                {% if project.image %}
                  <img src="{{ project.image.url }}" class="w-full h-48 object-cover">
                {% else %}
                  <img src="https://dummyimage.com/400x250/cccccc/000000&text=No+Image" class="w-full h-48 object-cover">
                {% endif %}

                <span class="absolute top-3 left-3 bg-orange-500 text-white text-xs px-3 py-1 rounded">
                  NEW LAUNCH
                </span>

                <span class="absolute bottom-3 right-3 bg-black text-white text-xs px-3 py-1 rounded">
                  Residential
                </span>
              </div>

              <div class="p-4">
                <p class="text-lg font-bold text-gray-700">
                  {{ project.project_name }}
                </p>

                  <!-- ================= CONFIGURATION CARD (NEW LAUNCH) ================= -->
                  <div class="config-card border bg-white mt-3 overflow-hidden">

                    {% with project.configurations.all as configs %}
                    {% if configs %}
                    {% regroup configs by bhk_type as bhk_groups %}

                    <!-- ================= TABS ================= -->
                    <div class="relative overflow-x-auto border-b border-gray-200">
                      <div class="bhk-tabs flex gap-1 text-sm font-semibold whitespace-nowrap relative px-2 py-1">

                        <!-- Animated underline -->
                        <span class="bhk-underline absolute bottom-0 h-[3px]"></span>

                        {% for group in bhk_groups %}
                          <button type="button"
                            class="bhk-tab px-3 py-2 rounded-md transition-all duration-200
                            {% if forloop.first %}active{% endif %}"
                            data-target="bhk-{{ project.id }}-{{ forloop.counter }}">
                            {{ group.grouper }}
                          </button>
                        {% endfor %}

                      </div>
                    </div>

                    <!-- ================= PANELS ================= -->
                    {% for group in bhk_groups %}
                    <div class="bhk-panel {% if not forloop.first %}hidden{% endif %}"
                        data-panel="bhk-{{ project.id }}-{{ forloop.counter }}">

                      <!-- ‚úÖ ONLY 2 ROWS VISIBLE + SCROLL -->
                      <div class="table-scroll bg-white overflow-y-auto max-h-[95px]">

                        <table class="w-full text-xs sm:text-sm border-collapse">
                          <thead class="bg-gray-50 sticky top-0 z-10">
                            <tr class="text-center font-bold text-gray-700">
                              <th class="px-2 py-2 border-b">Area</th>
                              <th class="px-2 py-2 border-b">Price</th>
                              <th class="px-2 py-2 border-b">Parking</th>
                              <th class="px-2 py-2 border-b">Balcony</th>
                            </tr>
                          </thead>

                          <tbody class="text-center">
                            {% for cfg in group.list %}
                            <tr class="h-[32px] {% if cfg.sold_out %}bg-red-50{% endif %}">

                              <td class="px-2 py-2 border-b text-gray-800">
                                {{ cfg.area_sqft }} sqft
                              </td>

                              <td class="px-2 py-2 border-b font-semibold">
                                {% if cfg.sold_out %}
                                  <span class="inline-flex items-center px-2 py-0.5 bg-red-100 text-red-700 text-[11px] font-bold">
                                    SOLD OUT
                                  </span>
                                {% else %}
                                  <span class="font-extrabold text-orange-600">
                                    {{ cfg.formatted_price }}
                                  </span>
                                {% endif %}
                              </td>

                              <td class="px-2 py-2 border-b">
                                {% if cfg.parking %}
                                  <span class="text-green-600 font-bold">Yes</span>
                                {% else %}
                                  <span class="text-gray-500">*</span>
                                {% endif %}
                              </td>

                              <td class="px-2 py-2 border-b">
                                {% if cfg.balcony %}
                                  <span class="text-green-600 font-bold">Yes</span>
                                {% else %}
                                  <span class="text-gray-500">*</span>
                                {% endif %}
                              </td>

                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>

                      </div>
                    </div>
                    {% endfor %}

                    {% else %}
                    <div class="text-center text-sm text-gray-500 py-3">
                      Configuration details available on request
                    </div>
                    {% endif %}
                    {% endwith %}

                  </div>


                <p class="text-sm text-gray-600 mt-1">
                  <i class="fas fa-map-marker-alt text-orange-500"></i>
                  {{ project.locality.name }}, {{ project.city.name }}
                </p>
              </div>

              <div class="bg-orange-500 text-center">
                <a href="{{ project.get_absolute_url }}"
                  class="block text-white font-bold w-full py-3 uppercase">
                  See Details
                </a>
              </div>
            </div>
            {% empty %}
              <p class="text-center text-gray-500">No Residential New Launch Projects</p>
            {% endfor %}

          </div>

          
        </div>
      </div>


          <!-- COMMERCIAL TAB -->
      <div id="commercial" class="tab-content hidden">
        <div class="swiper mySwiper">
          <div class="swiper-wrapper">

            {% for project in new_launch_commercial %}
            <div class="swiper-slide bg-white shadow-lg rounded overflow-hidden border-t-4 border-orange-500 hover:shadow-xl transition">

              <div class="relative">
                {% if project.image %}
                  <img src="{{ project.image.url }}" class="w-full h-48 object-cover">
                {% else %}
                  <img src="https://dummyimage.com/400x250/cccccc/000000&text=No+Image" class="w-full h-48 object-cover">
                {% endif %}

                <span class="absolute top-3 left-3 bg-orange-500 text-white text-xs px-3 py-1 ">
                  NEW LAUNCH
                </span>

                <span class="absolute bottom-3 right-3 bg-black text-white text-xs px-3 py-1 ">
                  Commercial
                </span>
              </div>

              <div class="p-4">
                <p class="text-lg font-bold text-gray-700">
                  {{ project.project_name }}
                </p>

                <p class="text-orange-600 font-semibold mt-1">
                  {{ project.get_configuration_details|linebreaksbr }}
                </p>

                <p class="text-sm text-gray-600 mt-1">
                  <i class="fas fa-map-marker-alt text-orange-500"></i>
                  {{ project.locality.name }}, {{ project.city.name }}
                </p>
              </div>

              <div class="bg-orange-500 text-center">
                <a href="{{ project.get_absolute_url }}"
                  class="block text-white font-bold w-full py-3 uppercase">
                  See Details
                </a>
              </div>
            </div>
            {% empty %}
              <p class="text-center text-gray-500">No Commercial New Launch Projects</p>
            {% endfor %}

          </div>
        </div>
      </div>


  </div>
</section>
<!-- NEW LAUCH PROJECTS END-->


<!-- ======================= POSSESSION STATUS (UNIQUE) ======================= -->
<section class="py-16 bg-gradient-to-b from-gray-50 to-white relative overflow-hidden">

  <!-- Decorative blobs -->
  <div class="absolute -top-20 -left-20 w-72 h-72 bg-orange-200/30 blur-3xl"></div>
  <div class="absolute -bottom-28 -right-24 w-80 h-80 bg-blue-200/30 blur-3xl"></div>

  <div class="max-w-7xl mx-auto px-6 grid lg:grid-cols-12 gap-10 items-start relative z-10">

    <!-- LEFT INFO -->
    <div class="lg:col-span-4">

      <!-- Vertical accent title -->
      <div class="flex items-start gap-4">
        <div class="w-2 h-20 bg-gradient-to-b from-orange-500 to-yellow-400 mt-2"></div>

        <div>
          <p class="text-sm font-bold tracking-widest text-gray-500 uppercase">Possession Dashboard</p>
          <h2 class="text-4xl font-extrabold text-gray-900 leading-tight mt-1">Explore Projects by <span class="text-orange-600">Possession Status</span></h2>
          <p class="text-gray-600 mt-3 max-w-md">Choose your preference ‚Äî ready, early possession, or new launch projects. Filter your listings with one click.</p>
        </div>
      </div>

      <!-- CTA -->
      <div class="mt-6">
        <a href="#" class="inline-flex items-center justify-center px-7 py-3 text-white font-bold bg-gradient-to-r from-[#002D62] to-[#0b4aa0] shadow hover:opacity-95 transition">View All Projects</a>
      </div>

    </div>

    <!-- RIGHT CARDS -->
    <div class="lg:col-span-8 grid md:grid-cols-3 gap-6">

      <!-- CARD 1 -->
      <a href="#" class="group relative rounded-3xl overflow-hidden shadow-lg border border-gray-100">
        <img src="https://images.pexels.com/photos/323705/pexels-photo-323705.jpeg" class="w-full h-72 object-cover group-hover:scale-110 transition duration-700" alt="Ready to Move">
        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>

        <div class="absolute top-4 left-4">
          <span class="px-4 py-1.5 text-xs font-extrabold bg-white/15 backdrop-blur text-white border border-white/25">READY TO MOVE</span>
        </div>

        <div class="absolute bottom-4 left-4 right-4">
          <div class="flex items-end justify-between">
            <div>
              <h3 class="text-xl font-extrabold text-white">Ready Homes</h3>
              <p class="text-white/80 text-sm mt-1">Immediate possession options</p>
            </div>
            <div class="text-right">
              <p class="text-2xl font-extrabold text-white leading-none">975</p>
              <p class="text-white/80 text-xs font-bold uppercase tracking-wide">Projects</p>
            </div>
          </div>

          <div class="mt-4 h-10 rounded-2xl bg-white/10 backdrop-blur border border-white/15 flex items-center justify-between px-4 opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition">
            <span class="text-white font-bold text-sm">Explore</span><span class="text-white text-sm">‚Üí</span>
          </div>
        </div>
      </a>

      <!-- CARD 2 -->
      <a href="#" class="group relative rounded-3xl overflow-hidden shadow-lg border border-gray-100">
        <img src="https://images.pexels.com/photos/439416/pexels-photo-439416.jpeg" class="w-full h-72 object-cover group-hover:scale-110 transition duration-700" alt="Early Possession">
        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>

        <div class="absolute top-4 left-4">
          <span class="px-4 py-1.5 text-xs font-extrabold bg-white/15 backdrop-blur text-white border border-white/25">EARLY POSSESSION</span>
        </div>

        <div class="absolute bottom-4 left-4 right-4">
          <div class="flex items-end justify-between">
            <div>
              <h3 class="text-xl font-extrabold text-white">Move Soon</h3>
              <p class="text-white/80 text-sm mt-1">Possession in near future</p>
            </div>
            <div class="text-right">
              <p class="text-2xl font-extrabold text-white leading-none">3904</p>
              <p class="text-white/80 text-xs font-bold uppercase tracking-wide">Projects</p>
            </div>
          </div>

          <div class="mt-4 h-10 rounded-2xl bg-white/10 backdrop-blur border border-white/15 flex items-center justify-between px-4 opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition">
            <span class="text-white font-bold text-sm">Explore</span><span class="text-white text-sm">‚Üí</span>
          </div>
        </div>
      </a>

      <!-- CARD 3 -->
      <a href="#" class="group relative rounded-3xl overflow-hidden shadow-lg border border-gray-100">
        <img src="https://images.pexels.com/photos/276724/pexels-photo-276724.jpeg" class="w-full h-72 object-cover group-hover:scale-110 transition duration-700" alt="New Launch">
        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>

        <div class="absolute top-4 left-4">
          <span class="px-4 py-1.5 text-xs font-extrabold bg-white/15 backdrop-blur text-white border border-white/25">NEW LAUNCH</span>
        </div>

        <div class="absolute bottom-4 left-4 right-4">
          <div class="flex items-end justify-between">
            <div>
              <h3 class="text-xl font-extrabold text-white">New Launch</h3>
              <p class="text-white/80 text-sm mt-1">Fresh listings & launches</p>
            </div>
            <div class="text-right">
              <p class="text-2xl font-extrabold text-white leading-none">512</p>
              <p class="text-white/80 text-xs font-bold uppercase tracking-wide">Projects</p>
            </div>
          </div>

          <div class="mt-4 h-10 rounded-2xl bg-white/10 backdrop-blur border border-white/15 flex items-center justify-between px-4 opacity-0 translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 transition">
            <span class="text-white font-bold text-sm">Explore</span><span class="text-white text-sm">‚Üí</span>
          </div>
        </div>
      </a>

    </div>

  </div>
</section>
<!-- ======================= POSSESSION STATUS (UNIQUE END) ======================= -->




<!-- Swiper JS -->
<script>
  // Swiper Init
  function initSwiper() {
    document.querySelectorAll(".mySwiper").forEach(swiperEl => {
      new Swiper(swiperEl, {
        slidesPerView: 1,
        spaceBetween: 20,
        loop: true,
        pagination: {
          el: swiperEl.querySelector(".swiper-pagination"),
          clickable: true,
        },
        navigation: {
          nextEl: swiperEl.querySelector(".swiper-button-next"),
          prevEl: swiperEl.querySelector(".swiper-button-prev"),
        },
        breakpoints: {
          768: { slidesPerView: 2 },
          1024: { slidesPerView: 3 },
        },
      });
    });
  }
  initSwiper();

  // Tabs functionality
  document.querySelectorAll(".tab-btn").forEach(btn => {
    btn.addEventListener("click", function () {
      document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
      this.classList.add("active");

      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.add("hidden"));
      document.getElementById(this.dataset.tab).classList.remove("hidden");
    });
  });
</script>
<hr>
<!-- üåü WHY CHOOSE US -->
<section class="py-14 bg-white" id="why-choose">
  <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">

    <!-- IMAGE SIDE -->
    <div class="relative group" data-aos="zoom-in-right">

      <div class="absolute -inset-2 bg-orange-500/10 blur-xl opacity-0 group-hover:opacity-100 transition"></div>

      <img src="{{ about_page.home_bg.url|default:'https://dummyimage.com/600x380/cccccc/000&text=Why+Choose+Us' }}"
           class="relative w-full h-[450px] object-cover  shadow-xl transition group-hover:scale-[1.01]"
           alt="Why Choose">

      <div class="absolute inset-0 border border-white/20 pointer-events-none"></div>
    </div>

    <!-- TEXT SIDE WITH INTERNAL SCROLL -->
    <div data-aos="fade-left">

      <h2 class="text-3xl font-bold text-orange-600 mb-4">
        Why Choose Us
      </h2>

      <!-- SCROLL CONTAINER -->
      <div class="max-h-[350px] overflow-y-auto pr-3 custom-scroll space-y-4 text-gray-800 text-[15px] leading-relaxed">

        {% for item in why_choose_items %}
        <div class="flex gap-3">

          <span class="text-green-600 text-xl leading-none">
            {% if item.icon %} {{ item.icon }} {% else %} ‚úî {% endif %}
          </span>

          <span class="font-medium">
            {{ item.title }}
            {% if item.subtitle %}
            <span class="text-gray-600 font-normal"> ‚Äî {{ item.subtitle }}</span>
            {% endif %}
          </span>

        </div>
        {% empty %}

        <div class="flex gap-3">
          <span class="text-green-600 text-xl leading-none">‚úî</span>
          <span class="font-medium">15+ Years of Experience</span>
        </div>

        <div class="flex gap-3">
          <span class="text-green-600 text-xl leading-none">‚úî</span>
          <span class="font-medium">Verified Properties Only</span>
        </div>

        {% endfor %}
      </div>

    </div>

  </div>
</section>

<!-- ===================== How We Work ======================= -->
<section class="w-full py-12 text-white bg-cover bg-center relative" style="background-image: url('https://sigmahomes.co.in/media/about/Prithvi_Pride.jpg');">

  <div class="absolute inset-0 bg-black/50"></div>

  <div class="relative max-w-7xl mx-auto px-6 text-center">

    <h2 class="text-3xl md:text-4xl font-semibold mb-14 uppercase">
      How We Work
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-10 relative">

      <div class="hidden md:block absolute top-[38px] left-0 right-0 h-[2px] bg-white/30"></div>

      <!-- ITEM 1 -->
      <div class="group flex flex-col items-center text-center">
        <div class="w-20 h-20 rounded-full border-2 border-white/40 flex items-center justify-center
                    transition group-hover:bg-orange-500 group-hover:scale-110">
          <i class="fa-solid fa-building text-2xl"></i>
        </div>

        <h3 class="mt-4 font-semibold">Search & Shortlisting</h3>
        <p class="mt-2 text-sm opacity-100 md:opacity-0 md:group-hover:opacity-100 transition">
          Lacs of verified listings from 500+ developers
        </p>

        <button class="common-btn"
          data-bs-toggle="modal"
          data-bs-target="#commonModal"
          data-modal-title="Get In Touch">
          Get In Touch
        </button>
      </div>

      <!-- ITEM 2 -->
      <div class="group flex flex-col items-center text-center">
        <div class="w-20 h-20 rounded-full border-2 border-white/40 flex items-center justify-center
                    transition group-hover:bg-orange-500 group-hover:scale-110">
          <i class="fa-solid fa-car text-2xl"></i>
        </div>

        <h3 class="mt-4 font-semibold">Site Visit</h3>
        <p class="mt-2 text-sm opacity-100 md:opacity-0 md:group-hover:opacity-100 transition">
          Guided site visits with experts
        </p>

        <button class="common-btn"
          data-bs-toggle="modal"
          data-bs-target="#commonModal"
          data-modal-title="Book Site Visit">
          Book Site Visit
        </button>
      </div>

      <!-- ITEM 3 -->
      <div class="group flex flex-col items-center text-center">
        <div class="w-20 h-20 rounded-full border-2 border-white/40 flex items-center justify-center
                    transition group-hover:bg-orange-500 group-hover:scale-110">
          <i class="fa-solid fa-sack-dollar text-2xl"></i>
        </div>

        <h3 class="mt-4 font-semibold">Home Loan Assistance</h3>
        <p class="mt-2 text-sm opacity-100 md:opacity-0 md:group-hover:opacity-100 transition">
          Loan guidance from top banks
        </p>

        <button class="common-btn"
          data-bs-toggle="modal"
          data-bs-target="#commonModal"
          data-modal-title="Home Loan Assistance">
          Apply Home Loan
        </button>
      </div>

      <!-- ITEM 4 -->
      <div class="group flex flex-col items-center text-center">
        <div class="w-20 h-20 rounded-full border-2 border-white/40 flex items-center justify-center
                    transition group-hover:bg-orange-500 group-hover:scale-110">
          <i class="fa-solid fa-file-lines text-2xl"></i>
        </div>

        <h3 class="mt-4 font-semibold">Legal Advice</h3>
        <p class="mt-2 text-sm opacity-100 md:opacity-0 md:group-hover:opacity-100 transition">
          Legal and documentation support
        </p>

        <button class="common-btn"
          data-bs-toggle="modal"
          data-bs-target="#commonModal"
          data-modal-title="Legal Advice">
          Get In Touch
        </button>
      </div>

      <!-- ITEM 5 -->
      <div class="group flex flex-col items-center text-center">
        <div class="w-20 h-20 rounded-full border-2 border-white/40 flex items-center justify-center
                    transition group-hover:bg-orange-500 group-hover:scale-110">
          <i class="fa-solid fa-key text-2xl"></i>
        </div>

        <h3 class="mt-4 font-semibold">Unit Booking</h3>
        <p class="mt-2 text-sm opacity-100 md:opacity-0 md:group-hover:opacity-100 transition">
          Assistance till final possession
        </p>

        <button class="common-btn"
          data-bs-toggle="modal"
          data-bs-target="#commonModal"
          data-modal-title="Unit Booking">
          Get In Touch
        </button>
      </div>

    </div>
  </div>
</section>
<!-- ===================== How We Work End======================= -->
  

<!-- Blog Section Start -->

<section id="blog" class="py-20 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4">

    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900">Latest from Our Blog</h2>
      <p class="text-gray-600 mt-2">Property tips, market news & expert guides</p>
    </div>

    <!-- ‚úÖ Desktop Grid (3 cards) -->
    <div class="hidden md:grid grid-cols-3 gap-8">
      {% for blog in blogs %}
      <article class="bg-white border border-gray-200 shadow-sm hover:shadow-xl transition overflow-hidden">
        <a href="{% url 'blog:blog_detail' blog.slug %}">
          {% if blog.featured_image %}
          <img src="{{ blog.featured_image.url }}" alt="{{ blog.title }}" class="w-full h-56 object-cover">
          {% else %}
          <img src="https://via.placeholder.com/600x400" alt="{{ blog.title }}" class="w-full h-56 object-cover">
          {% endif %}
        </a>
        <div class="p-6 text-left">
          {% if blog.category %}
          <p class="text-xs font-semibold text-gray-500 tracking-wider uppercase">{{ blog.category.name }}</p>
          {% else %}
          <p class="text-xs font-semibold text-gray-500 tracking-wider uppercase">General</p>
          {% endif %}
          <h3 class="text-xl font-extrabold text-gray-900 mt-2 leading-snug line-clamp-2">
            <a href="{% url 'blog:blog_detail' blog.slug %}" class="hover:underline">{{ blog.title }}</a>
          </h3>
          <p class="text-sm text-gray-600 mt-3 leading-relaxed line-clamp-2">{{ blog.short_description }}</p>
          <div class="flex items-center justify-between mt-5">
            <span class="text-xs font-semibold text-gray-500">By <span class="text-gray-800">{{ blog.author_name }}</span></span>
            <a href="{% url 'blog:blog_detail' blog.slug %}" class="inline-flex items-center gap-2 text-blue-700 text-sm font-extrabold hover:underline">Read More <span>‚Üí</span></a>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>

    <!-- ‚úÖ Mobile/Tablet Slider (dots pagination) -->
    <div class="md:hidden">
      <div class="swiper blogSwiper">
        <div class="swiper-wrapper">

          {% for blog in blogs %}
          <div class="swiper-slide">
            <article class="bg-white border border-gray-200 shadow-sm overflow-hidden">
              <a href="{% url 'blog:blog_detail' blog.slug %}">
                {% if blog.featured_image %}
                <img src="{{ blog.featured_image.url }}" alt="{{ blog.title }}" class="w-full h-56 object-cover">
                {% else %}
                <img src="https://via.placeholder.com/600x400" alt="{{ blog.title }}" class="w-full h-56 object-cover">
                {% endif %}
              </a>
              <div class="p-6 text-left">
                {% if blog.category %}
                <p class="text-xs font-semibold text-gray-500 tracking-wider uppercase">{{ blog.category.name }}</p>
                {% else %}
                <p class="text-xs font-semibold text-gray-500 tracking-wider uppercase">General</p>
                {% endif %}
                <h3 class="text-xl font-extrabold text-gray-900 mt-2 leading-snug line-clamp-2">
                  <a href="{% url 'blog:blog_detail' blog.slug %}" class="hover:underline">{{ blog.title }}</a>
                </h3>
                <p class="text-sm text-gray-600 mt-3 leading-relaxed line-clamp-2">{{ blog.short_description }}</p>
                <div class="flex items-center justify-between mt-5">
                  <span class="text-xs font-semibold text-gray-500">By <span class="text-gray-800">{{ blog.author_name }}</span></span>
                  <a href="{% url 'blog:blog_list' %}" class="inline-flex items-center gap-2 text-blue-700 text-sm font-extrabold hover:underline">Read More <span>‚Üí</span></a>
                </div>
              </div>
            </article>
          </div>
          {% endfor %}

        </div>

        <div class="swiper-pagination mt-6 !relative"></div>
      </div>
    </div>

    <div class="text-center mt-12">
      <a href="{% url 'blog:blog_list' %}" class="inline-flex items-center gap-2 px-7 py-3 bg-blue-700 text-white font-extrabold shadow-md hover:shadow-xl transition">View All Blogs <span>‚Üí</span></a>
    </div>

  </div>
</section>


<script>
  new Swiper(".blogSwiper", { slidesPerView: 1, spaceBetween: 18, pagination: { el: ".swiper-pagination", clickable: true } });
</script>

<!-- Blog Section End -->



<br>
<!-- STATS COUNTER -->
<section class="relative text-white py-20 bg-gradient-to-r from-orange-600 to-orange-500 overflow-hidden">
  <div class="absolute inset-0 bg-[url('/static/assets/images/pattern.svg')] opacity-10 animate-floatPattern"></div>
  <div class="max-w-6xl mx-auto grid md:grid-cols-4 gap-8 text-center relative z-10">

    {% for rs in impactmetric %}
    <!-- Single stat -->
    <div class="bg-white/10 backdrop-blur-lg rounded-2xl py-6 px-4 hover:bg-white/20 transition-transform transform hover:scale-105" data-aos="zoom-in">
      <i class="{{rs.icon}} text-4xl mb-3 text-orange-300 animate-pulseSlow"></i>
      <h3 class="text-4xl font-bold" id="projects-delivered">{{ rs.value }}+</h3>
      <p class="mt-2 text-lg">{{rs.title}}</p>
    </div>

    {% endfor %}

  </div>
</section>




<!-- üè¶ HOME LOAN PARTNERS SLIDER -->
<section class="py-20 bg-white" id="home-loan-partners">
  <div class="max-w-7xl mx-auto px-6 text-center">

    <h2 class="text-3xl md:text-4xl font-extrabold text-orange-600 mb-3">
      Home Loan Partners
    </h2>

    <p class="text-gray-600 max-w-2xl mx-auto mb-12">
      We are associated with India‚Äôs most trusted banks to help you
      get the best home loan deals.
    </p>

    <!-- ‚úÖ Slider Wrapper -->
    <div class="relative">


      <!-- ‚úÖ Swiper -->
      <div class="swiper loanPartnerSwiper !py-3 !px-2">
        <div class="swiper-wrapper">

          {% for bank in bank %}
          <div class="swiper-slide !w-[240px] md:!w-[280px] lg:!w-[300px]">

            <!-- ‚úÖ Premium Partner Card -->
            <div class="group relative w-full h-[160px] md:h-[180px] rounded-2xl overflow-hidden border border-gray-200 shadow-sm hover:shadow-2xl transition-all duration-500 bg-white">

              <!-- ‚úÖ Full Image Cover -->
              <img src="{{bank.image.url}}" alt="{{bank.title}}"
                class="w-full h-full object-cover transition duration-700 group-hover:scale-110 group-hover:rotate-[0.5deg]" />

              <!-- ‚úÖ Dark Gradient Overlay -->
              <div
                class="absolute inset-0 bg-gradient-to-t from-black/85 via-black/30 to-transparent opacity-100 transition duration-500">
              </div>

              <!-- ‚úÖ Bank Title -->
              <div class="absolute bottom-0 left-0 right-0 p-3">
                <p
                  class="text-white text-sm font-bold tracking-wide uppercase drop-shadow-lg truncate">
                  {{bank.title}}
                </p>
              </div>

              <!-- ‚úÖ Hover Glow Border -->
              <div
                class="absolute inset-0 rounded-2xl ring-0 group-hover:ring-2 group-hover:ring-orange-500/70 transition duration-500">
              </div>

            </div>
          </div>
          {% endfor %}

        </div>
      </div>

    </div>

  </div>
</section>


<script>
  var loanPartnerSwiper = new Swiper(".loanPartnerSwiper", {
    slidesPerView: 2,
    spaceBetween: 20,
    loop: true,
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
    breakpoints: {
      640: { slidesPerView: 3 },
      768: { slidesPerView: 4 },
      1024: { slidesPerView: 5 },
    },
  });
</script>

<!-- üè¢ FEATURED DEVELOPERS -->
<section class="py-16 bg-gray-100" id="developers">
  <div class="max-w-7xl mx-auto px-6 text-center">

    <h2 class="text-3xl font-bold text-orange-600 mb-12">
      Featured Developers
    </h2>

    {% if featured_developers %}
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-10 place-items-center">

      {% for dev in featured_developers %}
      <div class="relative w-full max-w-[200px] p-[2px] rounded-2xl 
                  bg-gradient-to-br from-orange-500 to-pink-600 
                  shadow-lg hover:shadow-xl transition-all duration-300 group"
           data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:70 }}">

        <!-- INNER CARD -->
        <div class="bg-white rounded-2xl p-6 group-hover:bg-gray-50 transition duration-300 flex flex-col items-center">

          <!-- LOGO -->
          {% if dev.logo %}
          <a href="{{ dev.get_absolute_url }}" class="block">
            <img src="{{ dev.logo.url }}"
                 alt="{{ dev.title }}"
                 class="h-16 w-auto object-contain mx-auto transition-all duration-300
                        group-hover:scale-110 group-hover:opacity-100" />
          </a>
          {% endif %}

          <h3 class="mt-4 text-gray-800 font-semibold text-sm group-hover:text-orange-600 transition">
            {{ dev.title }}
          </h3>

        </div>
      </div>
      {% endfor %}

    </div>

    {% else %}

    <!-- DEFAULT SAMPLE CARDS -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-10 place-items-center">

      {% for i in "1234" %}
      <div class="relative w-full max-w-[200px] p-[2px] rounded-2xl 
                  bg-gradient-to-br from-orange-500 to-pink-600 shadow-lg">

        <div class="bg-white rounded-2xl p-6 flex flex-col items-center">
          <img src="https://dummyimage.com/200x100/aaa/fff&text=Logo"
               class="h-16 object-contain mx-auto" />
        </div>
      </div>
      {% endfor %}

    </div>

    {% endif %}
  </div>
</section>

<!-- LOCALITY -->
<section class="py-16 bg-white">
  <div class="max-w-7xl mx-auto px-6">

    <!-- Heading -->
    <h2 class="text-4xl font-bold text-gray-900 mb-2">Popular Location</h2>
    <p class="text-gray-600 mb-10">
      Explore prime locations and key real estate destinations in Mumbai
    </p>

    <!-- Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
      {% for rs in featured_locality %}
      <!-- Card -->
      <div class="flex items-center gap-3 bg-gray-50 border border-gray-200 rounded-xl p-4 hover:shadow-md transition">
        <div class="bg-gray-100 p-3 rounded-xl">
          <i class="fa-solid fa-location-dot text-red-500 text-xl"></i>
        </div>
        <h3 class="font-semibold text-lg text-gray-800">{{rs.name}}</h3>
      </div>
      {% endfor %}     
    </div>
  </div>
</section>

<!-- üí¨ TESTIMONIALS -->
<section class="py-16 bg-gray-100" id="testimonial">
  <div class="max-w-4xl mx-auto px-6 text-center">
    <h2 class="text-3xl font-bold text-orange-600 mb-10">Testimonials</h2>
    <div class="grid md:grid-cols-2 gap-8">
      {% for t in testimonials %}
      <div class="bg-white shadow rounded p-2" data-aos="fade-up">
        {% if t.image %}
        <img src="{{ t.image.url }}" class="w-16 h-16 rounded-full mx-auto mb-3" />
        {% endif %}
        <p class="text-gray-700 italic">"{{ t.message }}"</p>
        <h3 class="mt-3 font-bold">{{ t.name }}</h3>
        {% if t.designation %}<p class="text-sm text-gray-500">{{ t.designation }}</p>{% endif %}
        <p class="text-yellow-400 mt-2">{% for i in "12345"|slice:":t.rating" %}‚≠ê{% endfor %}</p>
      </div>
      {% empty %}
      <p>No testimonials available.</p>
      {% endfor %}
    </div>
  </div>
</section>



<!-- LEFT DETAILS + RIGHT FORM CONTACT SECTION -->
<section id="contact" class="py-14 bg-orange-50">
    <h2 class="text-3xl font-bold text-orange-600 mb-4 text-center">Get In Touch</h2>
      <p class="text-gray-600 mb-6 text-center">We are here to assist you with any queries.</p>
  <div class="max-w-6xl mx-auto px-6 grid md:grid-cols-2 gap-12 items-start">

    <!-- LEFT SIDE DETAILS -->
    <div class="mt-6 rounded-lg overflow-hidden shadow-md border border-gray-100">
        {% if contact_content and contact_content.map_iframe %}
          {{ contact_content.map_iframe|safe }}
        {% elif settings_obj and settings_obj.google_map %}
          {{ settings_obj.google_map|safe }}
        {% else %}
          <div class="p-6 text-center text-sm text-gray-500">Map not available.</div>
        {% endif %}
      </div>

    <!-- RIGHT SIDE FORM -->
    <div class="bg-white p-8 rounded-xl shadow-md border border-orange-100">

      <h3 class="text-xl font-semibold text-orange-600 mb-5">Send Us a Message</h3>

      <form class="space-y-4">

        <input type="text" placeholder="Your Name"
               class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-400 outline-none">

        <input type="email" placeholder="Your Email"
               class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-400 outline-none">

        <textarea rows="4" placeholder="Your Message"
                  class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-orange-400 outline-none"></textarea>

        <button class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition">
          Send Message
        </button>

      </form>

    </div>

  </div>
</section>



<!-- ‚ùì FAQ -->
<section class="py-20 bg-gray-100" id="faq">
  <div class="max-w-7xl mx-auto px-6">

    <h2 class="text-4xl font-bold text-orange-600 mb-12 text-center">
      Frequently Asked Questions
    </h2>

    <!-- FAQ Grid -->
    <div id="faqContainer" class="grid grid-cols-1 md:grid-cols-2 gap-8"></div>

    <!-- Buttons -->
    <div class="text-center mt-10 space-x-4">
      <button id="loadMoreBtn"
        class="px-6 py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition">
        Load More
      </button>

      <button id="showLessBtn"
        class="px-3 py-2 bg-gray-400 text-white rounded-lg font-semibold hover:bg-gray-500 transition hidden">
        Show Less   
      </button>
    </div>

  </div>
</section>

<!-- Hidden FAQ Data -->
<div id="faqData" class="hidden">
  {% for faq in faqs %}
  <div class="faq-item">
    <div class="bg-white p-6 rounded-xl shadow hover:shadow-md transition">

      <details class="group cursor-pointer">
        <summary class="flex justify-between items-center font-semibold text-lg text-gray-900">
          {{ faq.question }}
          <i class="fas fa-chevron-down text-gray-600 transition-transform duration-300 group-open:rotate-180"></i>
        </summary>

        <p class="mt-4 text-gray-700 leading-7">
          {{ faq.answer|safe }}
        </p>
      </details>

    </div>
  </div>
  {% endfor %}
</div>
  

<!-- POPUS START -->
<div class="modal fade" id="commonModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-xl">

      <div class="modal-header">
        <h5 class="modal-title text-lg font-semibold" id="modalTitle">
          Get In Touch
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <form class="space-y-3">
          <input type="text" placeholder="Your Name" class="w-full border px-3 py-2 rounded">
          <input type="tel" placeholder="Phone Number" class="w-full border px-3 py-2 rounded">
          <textarea rows="3" placeholder="Message" class="w-full border px-3 py-2 rounded"></textarea>

          <button class="w-full bg-orange-500 text-white py-2 rounded">
            Submit
          </button>
        </form>
      </div>

    </div>
  </div>
</div>
<!-- POPUS END -->




<script>
document.addEventListener("DOMContentLoaded", function () {
  const modal = document.getElementById("commonModal");
  const title = document.getElementById("modalTitle");

  modal.addEventListener("show.bs.modal", function (event) {
    const btn = event.relatedTarget;
    title.innerText = btn.getAttribute("data-modal-title");
  });
});
</script>


<style>
.common-btn{
  margin-top:12px;
  padding:8px 16px;
  border:1px solid white;
  border-radius:6px;
  font-size:14px;
  opacity:1;
  transition:0.3s;
}
@media(min-width:768px){
  .common-btn{opacity:0}
  .group:hover .common-btn{opacity:1}
}
.common-btn:hover{
  background:white;
  color:black;
}
</style>


<script>
document.addEventListener("DOMContentLoaded", function () {
  new Swiper(".loanPartnerSwiper", {
    loop: true,
    speed: 6000,
    spaceBetween: 22,

    // ‚úÖ Continuous Smooth Auto Scroll
    freeMode: true,
    freeModeMomentum: false,

    autoplay: {
      delay: 0,
      disableOnInteraction: false,
      pauseOnMouseEnter: true
    },

    grabCursor: true,
    centeredSlides: false,

    // ‚úÖ Wider Layout (Less slides => wider cards)
    breakpoints: {
      320:  { slidesPerView: 1.2 },
      480:  { slidesPerView: 1.6 },
      640:  { slidesPerView: 2.3 },
      768:  { slidesPerView: 3 },
      1024: { slidesPerView: 3.8 },
      1280: { slidesPerView: 4.5 }
    }
  });
});
</script>



<script>
document.addEventListener("click", function (e) {

  const tab = e.target.closest(".bhk-tab");
  if (!tab) return;

  const card = tab.closest(".bg-white");
  if (!card) return;

  // reset tabs
  card.querySelectorAll(".bhk-tab").forEach(t => {
    t.classList.remove("border-orange-500", "text-orange-600");
    t.classList.add("border-transparent", "text-gray-600");
  });

  // reset panels
  card.querySelectorAll(".bhk-panel").forEach(p => {
    p.classList.add("hidden");
  });

  // activate
  tab.classList.add("border-orange-500", "text-orange-600");
  tab.classList.remove("border-transparent", "text-gray-600");

  const panel = card.querySelector(`[data-panel="${tab.dataset.target}"]`);
  if (panel) panel.classList.remove("hidden");
});
  function activateTab(tab, card) {

    const tabsWrapper = card.querySelector(".bhk-tabs");
    const underline = tabsWrapper.querySelector(".bhk-underline");

    // reset tabs
    card.querySelectorAll(".bhk-tab").forEach(t => {
      t.classList.remove("active");
    });

    // hide panels
    card.querySelectorAll(".bhk-panel").forEach(p => {
      p.classList.add("hidden");
    });

    // activate tab
    tab.classList.add("active");

    // move underline
    const tabRect = tab.getBoundingClientRect();
    const wrapRect = tabsWrapper.getBoundingClientRect();

    underline.style.width = tabRect.width + "px";
    underline.style.left = (tabRect.left - wrapRect.left) + "px";

    // show panel
    const panel = card.querySelector(
      `[data-panel="${tab.dataset.target}"]`
    );
    if (panel) panel.classList.remove("hidden");
  }

  /* ================= CLICK HANDLER ================= */
  document.addEventListener("click", function (e) {
    const tab = e.target.closest(".bhk-tab");
    if (!tab || tab.classList.contains("bhk-disabled")) return;

    const card = tab.closest(".config-card");
    if (!card) return;

    activateTab(tab, card);
  });

  /* ================= AUTO ACTIVATE FIRST TAB ================= */
  document.querySelectorAll(".config-card").forEach(card => {
    const firstTab = card.querySelector(".bhk-tab:not(.bhk-disabled)");
    if (firstTab) activateTab(firstTab, card);
  });
    document.addEventListener("click", function (e) {

    const tab = e.target.closest(".bhk-tab");
    if (!tab) return;

    const card = tab.closest(".config-card");
    if (!card) return;

    const tabsWrapper = card.querySelector(".bhk-tabs");
    const underline = tabsWrapper.querySelector(".bhk-underline");

    /* ================= RESET TABS ================= */
    card.querySelectorAll(".bhk-tab").forEach(btn => {
      btn.classList.remove("text-green-600");
      btn.classList.add("text-gray-600");
    });

    /* ================= HIDE PANELS ================= */
    card.querySelectorAll(".bhk-panel").forEach(panel => {
      panel.classList.add("hidden");
    });

    /* ================= ACTIVATE TAB ================= */
    tab.classList.remove("text-gray-600");
    tab.classList.add("text-green-600");

    /* ================= MOVE UNDERLINE ================= */
    const tabRect = tab.getBoundingClientRect();
    const wrapperRect = tabsWrapper.getBoundingClientRect();

    underline.style.width = `${tabRect.width}px`;
    underline.style.left = `${tabRect.left - wrapperRect.left}px`;

    /* ================= SHOW PANEL ================= */
    const target = tab.dataset.target;
    const panel = card.querySelector(`[data-panel="${target}"]`);
    if (panel) panel.classList.remove("hidden");

  });
    document.getElementById("city").addEventListener("change", function () {
    fetch(`/ajax/load-localities/?city_id=${this.value}`)
      .then(res => res.json())
      .then(data => {
        let locality = document.getElementById("locality");
        locality.innerHTML = '<option value="">Select Locality</option>';
        data.forEach(l => {
          locality.innerHTML += `<option value="${l.id}">${l.name}</option>`;
        });
      });
  });
  function openBHK(e, id) {
  document.querySelectorAll('.bhk-content').forEach(el => el.classList.add('hidden'));
  document.querySelectorAll('.bhk-tab').forEach(el => el.classList.remove('active'));

  document.getElementById(id).classList.remove('hidden');
  e.target.classList.add('active');
}
</script>


<style>
  .table-scroll{
  scrollbar-width: thin;
  scrollbar-color: #fb923c transparent;
}
.table-scroll::-webkit-scrollbar{
  width: 6px;
}
.table-scroll::-webkit-scrollbar-thumb{
  background: #fb923c;
  border-radius: 10px;
}

/* Glass tabs */
.bhk-tab {
  backdrop-filter: blur(10px);
  background: rgba(255,255,255,0.6);
  color: #4b5563;
}

/* Active tab */
.bhk-tab.active {
  color: #16a34a;
}

/* Disabled tab */
.bhk-disabled {
  opacity: 0.4;
  pointer-events: none;
}

/* Gradient underline */
.bhk-underline {
  background: linear-gradient(90deg, #16a34a, #22c55e);
  width: 0;
  left: 0;
  opacity: 0;
  transition:
    left 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    width 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}
     /* ================= BHK TABS SCROLL ================= */
  .bhk-tabs {
    overflow-x: auto;
    scrollbar-width: thin;
    scrollbar-color: #fb923c transparent;
    padding-bottom: 6px;
  }

  .bhk-tabs::-webkit-scrollbar {
    height: 5px;
  }
  .bhk-tabs::-webkit-scrollbar-thumb {
    background: #fb923c;
    border-radius: 10px;
  }

  /* ================= TAB STYLE ================= */
  .bhk-tab {
    position: relative;
    padding: 6px 10px;
    color: #374151;
    white-space: nowrap;
  }

  .bhk-tab.active {
    color: #fb923c;
  }

  /* ================= UNDERLINE ================= */
  .bhk-underline {
    left: 0;
    width: 0;
    background: #fb923c;
    transition: all 0.3s ease;
  }
  .bhk-panel div {
  scrollbar-width: thin;
  scrollbar-color: #fb923c transparent;
}

.bhk-panel div::-webkit-scrollbar {
  width: 6px;
}
.bhk-panel div::-webkit-scrollbar-thumb {
  background: #fb923c;
  border-radius: 10px;
}

</style>


<!-- NEW LAUNCH SECTION -->